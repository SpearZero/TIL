## 2. 도메인 지식 찾아내기

### 비즈니스 문제
비즈니스 도메인과 하위 도메인의 모든 수준에서 발생할 수 있다.

### 도메인 지식 찾아내기
- 효과적인 소프트웨어는 도메인 전문가가 문제를 생각하는 방식, 즉 멘탈 모델을 모방해야 한다.
- 소프트웨어 프로젝트의 성공은 도메인 전문가와 소프트웨어 엔지니어 간의 효과적인 지식 공유에 달렸다.
    - 문제를 해결하려면 문제를 이해해야 한다.

### 커뮤니케이션
- 효과적인 커뮤니케이션이 지식 공유와 프로젝트 성공에 필수적이다.
- 도메인 지식 -> 멘탈 모델 -> 솔루션 모델 -> 코드로 '변환'되는 과정에서 도메인 지식은 종종 왜곡된 상태로 전달된다.
    - 도메인 전문가가 소프트웨어 엔지니어에게 지식을 전달하기 위한 더나은 방법은 유비쿼터스 언어이다.

### 유비쿼터스 언어란 무엇인가?
- 참가자들이 효과적으로 소통하기 위해 변환에 의존하지 말고 같은 언어를 사용
- 유비쿼터스 언어
    - 비즈니스 도메인을 설명하기 위한 단일화된 언어 체계
- 소프트웨어 엔지니어, 제품 소유자, 도메인 전문가, UI/UX 디자이너와 같은 프로젝트와 관련된 모든 이해관계자는 비즈니스 도메인을 설명할 때 유비쿼터스 언어를 사용해야 한다.

### 비즈니스 언어
유비쿼터스 언어는 비즈니스 언어이다.
- 기술 용어는 빼고 비즈니스 도메인에 관련된 용어로만 구성해야 한다.

#### 일관성
- 유비쿼터스 언어는 반드시 정확하고 일관성 있어야 한다. 가정할 필요가 없어야 하고 비즈니스 도메인 로직을 명확하게 표현해야 한다.
- 모호성이 커뮤니케이션을 방해하기 때문에 유비쿼터스 언어의 용어는 오직 하나의 의미를 가져야 한다.

#### 모호한 용어
예를 들어 정책 이라는 용어에 대해 단일 의미를 갖게 하기 위해서는 "규제 규칙", "보험 계약" 과 같은 정확한 용어를 사용해야 한다.

#### 동의어
유비쿼터스 언어에서 두 용어는 서로 바꿔 사용할 수 없다.
- 사용자
    - 도메인 전문가의 언어로 신중하게 설명하면 '사용자', '방문자', '관리자', '계정' 등의 다른 용어가 혼용된다.
- 특정 컨텍스트 안에서 각각의 용어를 사용하는것이 바람직하다.
- 용어의 차이점을 이해해야 간단하고 명확한 모델을 구축하고 비즈니스 도메인 객체의 구현이 가능하다.

### 비즈니스 도메인 모델

#### 모델이란 무엇인가?
```
"모델이란 사물이나 현상에서 의도한 관점만 강조하고 다른 측면은 무시하여 간략히 표현한 것이다. 즉, 특정 용도를 마음에 둔 추상회의 결과다."
- 레베카 워프스-브룩(Rebecca Wirfs-Brook)
```

#### 효과적인 모델링
목적을 달성하는 데 필요한 세부사항만 포함한다.
- 유용한 모델은 실세계의 복사본이 아니라 문제를 해결하려는 의도가 있으며, 그 목적에 필요한 정보만 제공해야 한다.

모델은 본질적으로 추상화의 결과다.
- 추상화 : 불필요한 상세 정보를 생략하여 복잡한 문제를 다룰 수 있게 하고 당면한 문제를 푸는 데 필요한 정보만 남게 한다.

#### 비즈니스 도메인 모델링
모델은 필요한 시스템을 구현하는 데, 즉 소프트웨어가 해결하고자 하는 특정 문제를 해결하는 데 필요한 만큼의 비즈니스 도메인 관점을 포함하면 된다.

엔지니어링 팀과 도메인 전문가의 효과적인 커뮤니케이션은 필수다.
- 비즈니스 도메인이 복잡할수록 커뮤니케이션의 중요성은 커진다.
    - 비즈니스 도메인이 복잡할수록, 비즈니스 로직을 모델링하고 코드로 구현하기가 더 어렵다.
    - 비즈니스 도메인의 이해를 확인할 신뢰성 있는 유일한 방법은 도메인 전문가가 이해할 수 있는 비즈니스 언어로 대화하는 것이다.

#### 지속적인 노력
- 모든 이해관계자는 모든 프로젝트와 관련된 커뮤니케이션에 유비쿼터스 언어를 지속적으로 사용해서 지식 공유를 확산하고 비즈니스 도메인에 대한 공유된 이해를 강화해야 한다.
- 유비쿼터스 언어를 지속해서 검증하고 발전시켜야 한다.
    - 모두가 이 언어를 일상적으로 사용하면 비즈니스 도메인에 대한 통찰을 얻을 것이다.

#### 도구
유비쿼터스 언어를 수집하고 관리하는 과정을 돕는 도구와 기술이 존재
- 용어집
    - 위키와 같이 유비쿼터스 언어를 수집하고 관리하는 도구
    - 다 함께 용어집을 유지보수하는 것이 중요하다.
    - 용어집은 엔티티의 이름, 과정, 역할 등의 '명사(noun)'에만 효과적이다.

명사가 중요하지만 행동(behavior)을 포착하는 것이 중요하다.
- 단순히 명사와 관련된 동사의 목록이 아니다.
    - 규칙, 가정, 불변성을 가진 실제 비즈니스 로직이다.
    - 용어집으로 문서하기 어려움

용어집은 유스케이스 또는 거킨 테스트(Gherkin test)처럼 행동을 포착하는 데 적합한 다른 도구와 함께 사용하는 것이 중요하다.

위의 도구들이 유용하긴 하지만 일상적인 상호작용에서 실제로 유비쿼터스 언어를 사용하는 것보다는 못하다.
- 도구를 사용하여 유비쿼터스 언어를 관리하더라도 문서화가 실제로 언어를 사용하는 것을 대체할 것을 기대하면 안된다.

#### 도전과제
- 도메인 지식을 수집하는 신뢰할 만한 유일한 방법은 도메인 전문가와 대화를 하는 것
    - 도메인 전문가에게 비즈니스 도메인의 특성에 대해 질문하면 종종 숨어있던 충돌과 공백을 찾아내 명확하게 할 수 있다.
        - 핵심 하위 도메인의 경우에 일반적
        - 도메인 전문가가 자신의 영역을 더 잘 이해하도록 돕는 상호보완적인 배움의 과정
- 조직에서 비즈니스 도메인을 효과적으로 반영하지 않은 언어를 사용할 경우 문서화나 소스코드와 같이 제어하기 쉬운 부분부터 올바른 언어를 사용하도록 노력
- 비즈니스 도메인 엔티티(entity)의 이름은 영어 명사로 사용할 것을 권장
    - 코드에서 쉽게 동일한 용어를 사용하게 될 것이다.

#### 결론
- 효과적인 커뮤니케이션과 지식 공유는 성공적인 소프트웨어 프로젝트에 필수
- 유비쿼터스 언어는 도메인 전문가와 소프트웨어 엔지니어의 지식 간극을 메워주는 효과적인 도구
    - 커뮤니케이션과 지식 공유를 강화한다.
- 유비쿼터스 언어의 모든 용어는 일관성이 있어야 하고, 모호하지 않고 동의어가 없어야 한다.