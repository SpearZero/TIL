## 보안, 신뢰성, 유지보수성

### AI 생성 코드의 일반적인 보안 취약점
AI 생성 코드에서 관찰되는 일반적인 보안문제
- 하드코딩된 기밀 정보 또는 자격증명
- SQL 인젝션 취약점
- 크로스 사이트 스크립팅(XSS)
- 부적절한 인증 및 권한 부여
- 안전하지 않은 기본값 또는 설정
    - HTTPS 대신 HTTP, 구식 암호화 사용, CORS를 광범위하게 활성화 등
- 민감한 정보를 드러내는 오류 처리
- 의존성 관리와 업데이트
    - 유지보수 되지 않거나 알려진 취약점이 있는 라이브러리를 가져올 수 있음

### 보안 감사
AI가 생성한 코드를 효과적으로 감사하고 보안을 확보하는 방법
- 자동화된 보안 스캐너를 활용한다.
- AI를 보안 검토 보조로 활용한다.
    - 동일한 AI에게 생성한 코드에 대한 보안 감사를 요청한다.
    - 다른 AI 모델을 독립적인 검토자로 활용한다.
- 보안 체크리스트를 기반으로 개발자가 직접 코드 리뷰를 수행한다.
- 침투 테스트와 퍼즈 테스트를 수행한다.
    - 퍼즈 도구나 침투 테스트 도구를 활용해 취약점을 검증한다.
- 보안 중심의 단위 테스트를 추가한다.
- 최신 보안 정보를 컨텍스트로 제공한다.
    - 지식 컷오프 이후의 정보나 최신 취약점 정보를 반영한다.
- 로깅 관행을 점검하고 개선한다.
    - 중요한 작업이나 잠재적 실패 지점에 충분한 로그를 남긴다.
- 보안에 특화된 모델이나 도구를 사용한다.
- 개발 환경의 경고를 주의 깊게 확인한다.
    - IDE나 인텔리센스의 경고를 무시하지 않는다.
- 속도 늦추기
    - 기능 추가의 유혹을 참고, 철저한 코드 검토를 위한 시간을 계획해야 한다.

### AI 생성 시스템을 위한 효과적인 테스팅 프레임워크 구축
- AI가 작성한 코드도 사람이 작성한 코드와 동일한 안전성 기준을 충족시켜야 한다.
- 강력한 테스팅 프레임워크는 코드가 의도된 기능을 올바르게 수행하고 프로젝트가 발전함에 따라 그 정확성을 유지하도록 보장한다.
- AI를 코드 생성뿐 아니라 테스트 스위트 생성에도 사용할 수 있다.
    - AI가 일부 출력이나 작동 방식을 잘못 가정할 수 있으므로 주의해야한다. AI의 테스트도 코드와 마찬가지로 제안으로 취급해야 한다.

시도해볼만한 테스트 유형
- 속성 기반 테스팅과 퍼즈
- 부하 및 성능 테스팅
- 오류 처리
- 모니터링과 로깅
- 유지보수성

현실적인 테스트 전략
- 테스트는 기능의 성격에 맞게 설계한다.
    - 가변적인 결과를 가지는 기능(챗봇, 추천엔진 등)은 허용 범위를 기준으로 검증하고, 결정적인 로직(세율 계산 등)은 전통적인 테스트 방식을 적용한다.
- 통합 테스트는 컴포넌트 간 실제 데이터 흐름을 검증해, 유닛 테스트로는 발견되지 않는 비호환성을 사전에 잡아낸다.
    - 예) 주문과 배송 시스템에서 독립적인 유닛 테스트는 통과하지만, 날짜 형식이 달라 날짜를 전달하는 통합 테스트시 실패할 수 있다.
- AI가 요청하지 않은 기능을 암묵적으로 추가할 수 있으므로, 불필요한 기능은 제거하거나 반드시 테스트해야 한다.
- 프로덕션과 유사한 환경에서 실제 데이터와 함께 테스트해, 대용량, 높은 동시성에서만 드러나는 성능 문제를 사전에 식별한다.

### 성능 최적화
- AI가 생성한 코드는 항상 최적화되어 있지는 않다.
- 필요한 지점에서만 최적화를 적용하고, 과도하거나 불필요한 최적화는 피한다.

최적화를 검토해야할 영역
- 복잡도 분석
    - AI가 제안한 알고리즘의 복잡도를 확인하고 개선이 필요하면 개선한다.
- 메모리 사용량, 누수, 보존
    - 메모리를 과도 하게 사용하는지, 리소스를 해제하지 않는지 확인한다.
- 동시성과 병렬성
    - 스레드나 비동기를 지원하는 언어에서 단일 스레드로 작업하는 부분을 찾아서 개선한다.
- 캐싱
    - 캐싱이 필요한 부분을 찾아 캐싱한다.
- 데이터베이스 쿼리 최적화

### AI 가속화 코드베이스의 유지보수성 보장
AI가 생성한 코드가 지저분하거나 일관성이 없을 수 있다.
- 특히 여러 제안이 서로 다른 스타일이나 패턴을 가지고 있을 때 더욱 그렇다.

바이브 코딩 프로젝트를 깔끔하고 유지보수 가능하게 유지하는 방법
- 프롬프트 작성
    - 일관성 있는 코딩 표준 사용
    - 모듈성 장려 및 확산 방지를 위한 아키텍처 패턴
        - 거대한 파일 대신 작은 단위로 클래스나 모듈을 생성하도록 지시한다.
        - 입증된 아키텍처 패턴 원칙에 기반하여 코드를 작성하도록 지시한다.
        - AI는 패턴 구현에는 강하지만, 맥락에 맞는 패턴 선택은 인간의 몫이다.
- 코드 출력 작업
    - 지속적인 리팩터링과 테스트를 통해 품질을 유지한다.
    - 과도하게 복잡하거나 지나치게 간결한 AI 생성 코드는 유지보수가 편하게 수정한다.
    - 복원력과 대처 방안 구축
        - 실패를 대비한 대체 전략 생각하기 (외부 API 호출 실패, 예상치 못한 데이터 반환 등)
- 후속 작업
    - 철저한 문서화 및 주석 제공
    - AI가 작성한 코드라도 코드 리뷰를 진행한다.
    - 팀의 코드 스타일에 맞게 AI 프롬프트 하는 방법을 터득한다.
    - 개선이 필요한 부분은 기술 부채로 명시하고 추적한다.
    - AI가 익숙하지 않은 설계 패턴이나 라이브러리를 도입하는 경우 이를 학습한다.

### 코드 리뷰 전략
- AI가 작성한 코드가 테스트를 통과했더라도 맹신하지 말고, 로직을 비판적으로 검토하며 가능하면 추가 검증을 수행한다.
- 코드리뷰를 통해 AI가 작성한 코드에서 새로운 정보를 습득한다. 
- 불완전하거나 모호한 AI 출력은 그대로 수용하지 말고, 의도와 구현 이유를 명확히 확인한다.
    - 팀은 코드베이스의 모든 내용을 이해해야 한다.
- 보안과 성능 취약점에 주의를 기울여야 한다.
- 코드를 간단하거나 팀 스타일에 맞게 개선할 수 있다면 변경이나 리팩터링을 요청한다.
- AI로 인한 결함이 있는 코드라도 리뷰에서 존중하고 건설적인 태도를 유지한다.

### 안정적인 배포를 위한 모범 사례
- 배포전과 배포 중 고려할 점
    - CI/CD 파이프라인 자동화
        - AI 코드가 빌드를 깨트리거나 테스트 실패를 유발하는 요소를 도입하면 CI가 포착한다.
    - 코드형 인프라 (테라폼, 클라우드포메이션 등) 사용
    - 단계적 롤아웃 사용과 롤백 계획 수립
    - 관찰 가능성 설정 (오류 추적, 성능, 가용성 등을 모니터링)
    - 보안에 대한 지속적인 경계
        - API 키와 같은 비밀 정보가 누출되지 않도록 한다.
    - 블루 - 그린 배포나 섀도우 테스트 같은 기법을 사용한 테스트
- 지속적인 모범 사례
    - 운영 런북 작성
        - 운영 팀을 위해 AI가 생성한 코드의 특이한 부분을 설명하는 런북 제공
    - 프로덕션에서 테스트
    - 정기적인 감사
    - 인간의 개입 유지
        - AI는 코드 작성을 도울 수 있지만, 새벽에 발생하는 장애를 해결하지는 못한다.
    - 실패로부터 학습

신뢰성은 코드 뿐만 아니라 인프라와 운영도 관련이 있다. 견고한 운영 관행이 전체 시스템의 신뢰성을 유지한다.

배포에서도 AI 중심 프로젝트를 다른 고품질 소프트웨어와 동일하게 취급해야 한다. (테스트, 모니터링, 롤백 가능성 확보 등)

빈번한 소규모 배포는 드문 큰 배포에 비해 위험을 줄여준다.
- 발생하는 문제를 식별하고 수정하기 더 쉽다.

### 요약
- AI를 신뢰하는 동시에, AI가 생성한 코드를 전문적인 지식을 통해 검증해야 한다.