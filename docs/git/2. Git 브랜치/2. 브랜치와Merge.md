> https://git-scm.com/book/ko/v2/Git-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EB%B8%8C%EB%9E%9C%EC%B9%98%EC%99%80-Merge-%EC%9D%98-%EA%B8%B0%EC%B4%88

## 브랜치와 Merge의 기초
### 브랜치의 기초
사이트 작업을 하는 중 이슈관리 시스템에 등록된 53번 이슈를 처리한다고 하면 이 이슈에 집중할 수 있는 브랜치를 하나<br> 만든다.
<pre>
    <code>
        // 브랜치 생성과 동시에 체크아웃
        $ git checkout -b iss53
        Switched to a new branch 'iss53'

        $ vi index.html
        $ git commit -a -m 'added a new footer [issue 53]'
    </code>
</pre>
![basic-brancing-3](./pic/basic-branching-3.png)<br>
iss53 브랜치를 만든 상황에서 사이트에 문제가 생겨 즉시 고쳐야한다. 버그를 해결한 Hotfix에 iss53이 섞이는 걸 방지<br>하기위해 iss53 관련 코드를 어딘가에 저장해 두고 원래 운영 환경으로 복구해야 한다. 그냥 master 브랜치로 돌아가면 된다.<br>
브랜치를 이동하기 전에 커밋을 해야한다. 커밋하지 않은 파일이 Checkout 할 브랜치와 충돌이 나면 브랜치를 변경할 수 없다.
<pre>
    <code>
        $ git checkout master
        $ git checkout -b hotfix
        $ vi index.html
        $ git commit -a -m 'fixed the index.html'
    </code>
</pre>
![basic-brancing-4](./pic/basic-branching-4.png)<br>
문제를 해결했으면 hotfix를 master에 합쳐야 한다. 
<pre>
    <code>
        $ git checkout master
        $ git merge hotfix
        Updating 1914915..dd6f4db
        Fast-forward
    </code>
</pre>
hotfix 브랜치가 가리키는 C4 커밋이 C2 커밋에 기반한 브랜치이기 때문에 브랜치 포인터는 Merge 과정<br> 없이 그저 최신 커밋으로 이동한다. 이를 "Fast-forward"라고 한다.<br>
![basic-brancing-5](./pic/basic-branching-5.png)<br>
이제 필요없는 hotfix 브랜치는 삭제한다. 그리고 iss53 브랜치로 되돌아가 작업을 계속한다.
<pre>
    <code>
        $ git branch -d hotfix
        $ git checkout iss53
        $ vi index.html
        $ git commit -a -m 'finished the new footer [issue 53]'
    </code>
</pre>

### Merge의 기초
53번 이슈를 다 구현하고 master에 merge하는 과정은 앞 과정과 비슷하다.
<pre>
    <code>
        $ git checkout master
        $ git merge iss53
        Merge made by the 'recursive' strategy.
    </code> 
</pre>
이 경우 'Fast-forward'를 사용하지 않는다. master 브랜치가 iss53 브랜치의 조상이 아니기 때문에 각 브랜치가 가르키는 <br> 커밋 두개와 공통된 조상을 이용하여 3-way Merge를 수행한다.
![basic-merging-1](./pic/basic-merging-1.png)<br>
이 경우 3-way Merge의 결과를 별도의 커밋으로 만들고 나서 해당 브랜치가 그 커밋을 가르키도록 이동시킨다.<br>
![basic-merging-2](./pic/basic-merging-2.png)<br>
이제 iss53 브랜치는 필요 없으므로 삭제한다.
> $ git branch -d iss53

### 충돌의 기초
Merge하는 두 브랜치에서 같은 파일을 수정하고 Merge하면 Git은 해당 부분을 Merge하지 못한다. 이 예에서 hotfix와 iss53<br>이 같은 부분을 수정했다면 아래와 같은 메시지가 출력될 것이다.
<pre>
    <code>
        $ git merge iss53
        Auto-merging index.html
        CONFLICT (content): Merge conflict in index.html
        Automatic merge failed; fix conflicts and then commit the result.
    </code>
</pre>
개발자가 충돌을 해결하지 않는 한 Merge과정을 진행할 수 없다.
<pre>
    <code>
        $ git stauts

        Unmerged paths:
        (use "git add <file>..." to mark resolution)

        both modified:   index.html
    </code>
</pre>
git status명령을 이용하면 충돌이 일어난 파일이 무엇인지 알 수 있다. 이 파일들은 Unmerged로 표시된다. 
<pre>
    <code>
            Hello World!!
        <<<<<<< HEAD
            HotFix!!
        =======
            Add New Line!!
            Add New Line!!
        >>>>>>> iss53
    </code>
</pre>
<<<<<, =====, >>>>> 부분을 지우고 커밋한다.<br>
다른 Merge도구도 충돌을 해결할 수 있다. git mergetool 명령어 사용