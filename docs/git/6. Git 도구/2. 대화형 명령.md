> https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%EB%8C%80%ED%99%94%ED%98%95-%EB%AA%85%EB%A0%B9

## 대화형 명령
대화형 명령을 사용하여 스크립트를 통해 수정된 파일의 일부분을 커밋하거나 수정하는 파일이 많아 통째로 커밋하기 어려울<br> 때 이슈별로 나눠서 커밋하기 좋다.

git add명령에 i나 --interactive 옵션을 주면 Git은 대화형 모드로 들어간다.
<pre>
    <code>
        $ git add -i
                staged     unstaged path
        1:    unchanged        +0/-1 TODO
        2:    unchanged        +1/-1 index.html
        3:    unchanged        +5/-1 lib/simplegit.rb

        *** Commands ***
        1: status     2: update      3: revert     4: add untracked
        5: patch      6: diff        7: quit       8: help
        What now>
    </code>
</pre>

### Staging Area에 파일 추가하고 추가 취소하기
What now> 프롬프트에 2나 u를 입력하면 Staging Area에 추가할 수 있는 파일들을 모두 보여준다. 파일들을 추가하고 싶으면<br> 파일들의 번호를 입력한다.
<pre>
    <code>
        What now> 2
                    staged     unstaged path
            1:    unchanged        +0/-1 TODO
            2:    unchanged        +1/-1 index.html
            3:    unchanged        +5/-1 lib/simplegit.rb
        Update>> 1,2
                    staged     unstaged path
          * 1:    unchanged        +0/-1 TODO
          * 2:    unchanged        +1/-1 index.html
            3:    unchanged        +5/-1 lib/simplegit.rb
        Update>>
    </code>
</pre>
*표시가 붙은 파일은 Stage하도록 선택된 것이다. 선택하고 Update 프롬프트에 아무것도 입력하지 않은 상태에서 Enter를 입력<br> 하면 파일을 Staging Area에 추가한다.

파일을 다시 Unstage하고 싶으면 3이나 r을 입력한다. 입력하면 Revert할수 있는 파일이 나오는데 그 파일 번호를 선택한 후<br> Revert>> 프롬프트에서 Enter를 치면 Unstaged 상태로 돌아간다.

Staged된 파일들의 변경 내용을 보려면 6이나 d를 입력한다. 그러면 Staged된 파일들을 보여주는데 파일의 번호를 입력하면<br> 변경 내용들을 보여준다. 이는 git diff --cached를 실행한 결과와 같다.

### 파일의 일부분만 Staging Area에 추가하기
파일의 일부분만 Staging Area에 추가하는 것도 가능하다. 대화형 프롬프트에서 5 또는 p를 입력한다. 그러면 Git은 부분적으로<br> Staging Area에 추가할 파일이 있는지 묻는다. 파일을 선택하면 특정 부분을 Staging Area에 추가할 것인지 부분별로 구분하여<br> 묻는다.

<pre>
    <code>
        diff --git a/lib/simplegit.rb b/lib/simplegit.rb
        index dd5ecc4..57399e0 100644
        --- a/lib/simplegit.rb
        +++ b/lib/simplegit.rb
        @@ -22,7 +22,7 @@ class SimpleGit
        end

        def log(treeish = 'master')
        -    command("git log -n 25 #{treeish}")
        +    command("git log -n 30 #{treeish}")
        end

        def blame(path)
        Stage this hunk [y,n,a,d,/,j,J,g,e,?]?
    </code>
</pre>
여기에서 ?를 입력하면 선택할 수 있는 명령을 설명해준다. y나 n을 입력하면 각 부분을 Stage 할지 말지 결정할 수 있다. 어떤<br> 부분은 Stage하고 다른 부분은 Unstaged 상태로 남겨놓고 status 명령으로 확인해보면 결과는 아래와 같다.
<pre>
    <code>
        What now> 1
                  staged     unstaged path
          1:    unchanged        +0/-1 TODO
          2:        +1/-1      nothing index.html
          3:        +1/-1        +4/-0 lib/simplegit.rb
    </code>
</pre>
어떤 라인은 Staged 상태고 어떤 라인은 Unstaged상태이다. 

대화형 스크립트 말고도 git add -p나 git add --patch명령으로도 같은 일을 할 수 있다.