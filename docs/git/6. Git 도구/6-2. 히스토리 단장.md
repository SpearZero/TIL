>> https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC-%EB%8B%A8%EC%9E%A5%ED%95%98%EA%B8%B0

## 히스토리 단장하기
### 커밋 합치기
> $ git rebase -i HEAD~3

입력시 나오는 화면에서 "squash"를 입력하면 Git은 해당 커밋과 바로 이전 커밋을 합치고, 커밋 메시지도 Merge한다. 3개의<br> 커밋을 합치려면 아래와 같이 한다.
<pre>
    <code>
        pick dd6f4db fixed the index.html
        squash 6b7df2c added a new footer [issue 53]
        squash 9f7f6c2 finished the new footer [issue 53]
    </code>
</pre>

### 커밋 분리하기
커밋을 분리한다는 것은 기존의 커밋을 해제하고 Stage를 여러 개로 분리하고 나서 그것을 원하는 횟수만큼 다시 커밋하는 것이다.<br> rebase -i 스크립트에서 해당 커밋을 'edit'한다.
<pre>
    <code>
        pick f7f3f6d changed my name a bit
        edit 310154e updated README formatting and added blame
        pick a5f4a0d added cat-file
    </code>
</pre>
저장하고 편집기를 종료하면 Git은 제일 오래된 커밋의 부모로 이동하고 pick이 붙은 커밋을 처리하고 콘솔 프롬프트를 보여준다.<br> 그 후 git reset HEAD^ 명령으로 커밋을 해제한다. 수정한 파일은 Unstaged 상태가 되는데, 다시 Stage한 후 커밋을 원하는 만큼<br> 반복 한 후 git rebase --continue 작업을 하면 남은 Rebase작업이 끝난다.
> // Staged 상태로 만들고 커밋 후..<br>
$ git rebase --continue

Rebase를 하면 커밋의 SHA-1의 값은 변경되므로 절대로 서버에 Push한 커밋을 수정하면 안된다.

### filter-branch 포크레인
수정해야 하는 커밋이 너무 많아서 Rebase 스크립트로 수정하기 어려운 경우에 사용한다. filter-branch도 커밋이 다른 사람과<br> 공유 중이면 사용하지 말아야한다.

#### 모든 커밋에서 파일을 제거하기
git add . 같은 명령을 실행해 모든 파일을 커밋하거나 암호가 포함된 파일을 커밋한 경우 이런 파일을 삭제해야한다. filter-branch<br>는 히스토리 전체에서 필요한것만 골라내는 데 사용하는 도구이다.
> $ git filter-branch --tree-filter 'rm -f password.txt' HEAD

--tree-filter 옵션은 프로젝트를 Checkout한 후에 각 커밋에 명시한 명령을 실행시키고 그 결과를 다시 커밋한다.

-all 옵션을 주면 모든 브랜치에 적용한다.

이 외에도 하위 디렉토리를 루트 디렉토리로 변경하거나 모든 커밋의 이메일 주소를 수정하는데 사용할 수 있다.